<!DOCTYPE HTML>
<head>
	<title>Administracion de usuarios</title>
	<meta charset="utf-8" />
	<link rel="stylesheet" href="css/bootstrap.min.css" />
	<link rel="stylesheet" href="css/bootstrap-theme.min.css" />
	<link rel="stylesheet" href="abm.css" />
	<script type="text/javascript" src="jquery.js"></script>
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<script type="text/javascript" src="abm.js"></script>
</head>

<body onload="initUI()">


    <nav class="navbar navbar-inverse">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Administración de usuarios</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a href="/login">Cerrar Sesión</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

	<nav id="tabBox">
		<ul class="nav nav-tabs">
			<li class="active"><a id="personasTabButton" class="glyphicon glyphicon-user" onclick="ui.activateTab('personas')" data-toggle="tab">Personas</a>
			<li><a id="usuariosTabButton" class="glyphicon glyphicon-user" onclick="ui.activateTab('usuarios')" data-toggle="tab">Usuarios</a>
			<li><a id="rolesTabButton" class="glyphicon glyphicon-knight" onclick="ui.activateTab('roles')" data-toggle="tab">Roles</a>
			<li><a id="permisosTabButton" class="glyphicon glyphicon-check" onclick="ui.activateTab('permisos')" data-toggle="tab">Permisos</a>
		</ul>
	</nav>

	<section class="tabSection" id="personasTab">
		<table id="personasTable" caption="Administrar personas">
			<thead><tr>
				<th>ID</th>
				<th>Apellido</th>
				<th>Nombres</th>
				<th>Tipo Doc.</th>
				<th>Nro. Doc.</th>
				<th>Fecha nacimiento</th>
				<th>Sexo</th>
				<th>Domicilio</th>
				<th>Telefono</th>
				<th>Estado</th>
			</tr></thead>
			<tbody>
			</tbody>
		</table>
	</section>

	<section class="tabSection" id="usuariosTab">
		<table id="usuariosTable">
			<thead><tr>
				<th>ID</th>
				<th>Nombre usuario</th>
				<th>E-Mail</th>
				<th>Estado</th>
			</tr></thead>
			<tbody>
			</tbody>
		</table>
	</section>

	<section class="tabSection" id="rolesTab">
		<table id="rolesTable">
			<thead><tr>
				<th>ID</th>
				<th>Nombre Rol</th>
				<th>Nombre amigable</th>
				<th>Estado</th>
			</tr></thead>
			<tbody>
			</tbody>
		</table>
	</section>

	<section class="tabSection" id="permisosTab">
		<table id="permisosTable">
			<thead><tr>
				<th>ID</th>
				<th>Funcionalidad</th>
				<th>Nombre Permiso</th>
				<th>Estado</th>
			</tr></thead>
			<tbody>
			</tbody>
		</table>


	</section>

	<div class="text-center navbar-fixed-bottom navbar-default">
		<div class="btn-group" style="margin: 12px">
			<button type="button" id="deleteButton" class="glyphicon glyphicon-trash btn-danger btn-lg" onclick="ui.deleteButtonPressed()">Eliminar</button>
			<button type="button" id="editButton" class="glyphicon glyphicon-pencil btn-primary btn-lg" onclick="ui.editButtonPressed()">Modificar</button>
			<button type="button" id="rolesButton" class="glyphicon glyphicon-knight btn-primary btn-lg" onclick="ui.rolesButtonPressed()">Roles</button>
			<button type="button" id="permisosButton" class="glyphicon glyphicon-check btn-primary btn-lg" onclick="ui.permisosButtonPressed()">Permisos</button>
			<button type="button" id="newButton" class="glyphicon glyphicon-plus btn-success btn-lg" onclick="ui.newButtonPressed()">Agregar</button>
		</div>
	</div>

	<div id="modalPersona" class="modal fade">
		<div class="modal-dialog" id="formPersona">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" onclick="ui.closeModal('Persona')">&times;</button>
					<h2 id="formPersonaTitle" class="modal-title">Persona</h2>
				</div> <!-- .modal-header -->
				<div class="modal-body">
					<!-- Las fotos no estan habilitadas todavia -->
					<input type="hidden" name="foto" value="">
					<input type="hidden" name="foto_registro" value="">

					<div class="form-group">
						<label for="id" id="personaIdLabel">ID</label>
						<input type="number" disabled name="id">
					</div><!-- .form-group -->

					<div class="form-group">
						<label for="apellidos">Apellido (*)</label>
						<input type="text" name="apellidos">
					</div><!-- .form-group -->

					<div class="form-group">
						<label for="nombres">Nombre (*)</label>
						<input type="text" name="nombres">
					</div><!-- .form-group -->

					<div class="form-group">
					<label for="tipo_doc">Tipo de documento (*)</label>
						<select name="tipo_doc">
							<option value="1">DNI</option>
							<option value="2">LE</option>
							<option value="3">LC</option>
						</select>
					</div><!-- .form-group -->

					<div class="form-group">
						<label for="nro_doc">Numero de documento (*)</label>
						<input type="number" name="nro_doc">
					</div><!-- .form-group -->

					<div class="form-group">
						<label for="fecha_nacimiento">Fecha de nacimiento (*)</label>
						<input type="date" name="fecha_nacimiento">
					</div><!-- .form-group -->

					<div class="form-group">
						<label for="domicilio">Domicilio (*)</label>
						<input type="text" name="domicilio">
					</div><!-- .form-group -->

					<div class="form-group">
						<label for="sexo">Sexo (*)</label>
						<select name="sexo">
							<option value="M">Masculino</option>
							<option value="F">Femenino</option>
							<option value="O">Otro</option>
						</select>
					</div><!-- .form-group -->

					<div class="form-group">
						<label for="telefono">Telefono (*)</label>
						<input type="text"  name="telefono">
					</div><!-- .form-group -->

					<div class="form-group">
						<label for="descripcion">Descripcion</label>
						<textarea  name="descripcion"></textarea>
					</div><!-- .form-group -->

					<div class="form-group">
						<label for="Estado">Estado (*)</label>
						<select name="estado">
							<option value="A">Activo</option>
							<option value="B">Inactivo</option>
						</select>
					</div><!-- .form-group -->
				</div><!-- .modal-body -->
				<div class="modal-footer">
					<button type="button" class="saveButton" onclick="ui.sendPersonaForm()">Guardar</button>
				</div><!-- .modal-footer -->
			</div><!-- .modal-content -->
		</div><!-- .modal-dialog -->
	</div><!-- modal -->

	<div id="modalUsuario" class="modal fade">
		<div class="modal-dialog" id="formUsuario">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" onclick="ui.closeModal('Usuario')">&times;</button>
					<h2 class="modal-title">Usuario</h2>
				</div><!-- .modal-header -->
				<div class="modal-body">

					<div class="form-group">
						<label for="id">ID</label>
						<input type="number" id="usuarioIdInput" name="id">
					</div><!-- .form-group -->
	
					<div class="form-group">
						<label for="id_persona">Persona (*)</label>
						<select name="id_persona">
						</select>
					</div><!-- .form-group -->

					<div class="form-group">
						<label for="nombre_usuario">Nombre de Usuario (*)</label>
						<input type="text" name="nombre_usuario">
					</div><!-- .form-group -->

					<div class="form-group">
						<label for="password">Contraseña (*)</label>
						<input type="password" name="password">
					</div><!-- .form-group -->

					<div class="form-group">
						<label for="email">E-Mail (*)</label>
						<input type="text" name="email">
					</div><!-- .form-group -->

					<div class="form-group">
						<label for="descripcion">Descripcion (*)</label>
						<textarea name="descripcion" ></textarea>
					</div><!-- .form-group -->

					<div class="form-group">
						<label for="estado">Activo</label>
						<select name="estado">
							<option value="A">Activo</option>
							<option value="B">Inactivo</option>
							<option value="S">Suspendido</option>
						</select>
					</div><!-- .form-group -->

				</div><!-- .modal-body -->
				<div class="modal-footer">
					<button type="button" class="btn-primary glyphicon glyphicon-knight" onclick="ui.rolesButtonPressed()">Gestionar roles</button>
					<button type="button" class="saveButton" onclick="ui.sendUsuarioForm()">Guardar</button>
				</div><!-- .modal-footer -->
			</div><!-- .modal-content -->
		</div><!-- .modal-content -->
	</div><!-- .modal -->

	<div id="modalUsuarioRol" class="modal fade">
		<div class="modal-dialog" id="formUsuarioRol">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" onclick="ui.closeModal('UsuarioRol')">&times;</button>
					<h2 class="modal-title">Roles del usuario</h2>
					<h3 class="modal-title">NOMBRE DE USUARIO</h3><!-- Sera modificado desde javascript -->
				</div><!-- .modal-header -->
				<div class="modal-body">
					<input type="hidden" name="id_usuario" value="">

					<div class="col-md-4">
						<select size="12" name="roles_asignados"></select>
					</div>

					<div class="btn-group-vertical col-md-4">
						<button type="button" class="btn-primary glyphicon glyphicon-arrow-left" onclick="ui.assignRolUsuario()">Asignar</button>
						<button type="button" class="btn-primary glyphicon glyphicon-arrow-right" onclick="ui.removeRolUsuario()" >Quitar</button>
					</div>

					<div class="col-md-4">
						<select size="12" name="roles_no_asignados"></select>
					</div>

					<div style="visibility: hidden">.</div><!-- sin esto se ve mal el layout -->
				</div><!-- .modal-body -->
				<div class="modal-footer">
						<button type="button" class="btn-success glyphicon glyphicon-ok" onclick="ui.closeModal('UsuarioRol')">Aceptar</button>
				</div><!-- .modal-footer -->
			</div><!-- .modal-content -->
		</div><!-- .modal-dialog -->
	</div><!-- .modal -->

	<div id="modalRol" class="modal fade">
		<div class="modal-dialog" id="formRol">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" onclick="ui.closeModal('Rol')">&times;</button>
					<h2 class="dialog-title">Rol</h2>
				</div><!-- .modal-header -->
				<div class="modal-body">
					<div class="form-group">
						<label for="id">ID</label>
						<input type="number" name="id" disabled>
					</div><!-- .form-group-->

					<div class="form-group">
						<label for="nombre_rol">Nombre de Rol (*)</label>
						<input type="text" name="nombre_rol">
					</div><!-- .form-group-->

					<div class="form-group">
						<label for="nombre_amigable">Nombre Amigable (*)</label>
						<input type="text" name="nombre_amigable">
					</div><!-- .form-group-->

					<div class="form-group">
						<label for="descripcion">Descripcion</label>
						<textarea name="descripcion" ></textarea>
					</div><!-- .form-group-->

					<div class="form-group">
						<label for="estado">Estado (*)</label>
						<select name="estado">
							<option value="A">Activo</option>
							<option value="B">Inactivo</option>
						</select>
					</div><!-- .form-group-->

				</div><!-- .modal-body -->
				<div class="modal-footer">
					<button type="button" class="btn-primary glyphicon glyphicon-check" onclick="ui.permisosButtonPressed()">Gestionar permisos</button>
					<button type="button" class="saveButton" onclick="ui.sendRolForm()">Guardar</button>
				</div><!-- .modal-footer -->
			</div><!-- .modal-content -->
		</div><!-- .modal-dialog -->
	</div><!-- .modal -->

	<div id="modalPermisoRol" class="modal fade">
		<div class="modal-dialog" id="formPermisoRol">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" onclick="ui.closeModal('PermisoRol')">&times;</button>
					<h2 class="dialog-title">Permisos del rol</h2>
					<h3 class="dialog-title">NOMBRE DE ROL</h3><!-- Sera modificado desde javascript -->
				</div><!-- .modal-header -->
				<div class="modal-body">
					<input type="hidden" name="id_rol" value="">

					<div class="col-md-4">
						<select size="12" name="permisos_asignados">
						</select>
					</div>

					<div class="btn-group-vertical col-md-4">
						<button type="button" class="btn-primary glyphicon glyphicon-arrow-left" onclick="ui.assignPermisoRol()">Asignar</button>
						<button type="button" class="btn-primary glyphicon glyphicon-arrow-right" onclick="ui.revokePermisoRol()">Quitar</button>
					</div>

					<div class="col-md-4">
						<select size="12" name="permisos_no_asignados">
						</select>
					</div>
					<div style="visibility: hidden">.</div><!-- sin esto se ve mal el layout -->
				</div><!-- .modal-body -->
				<div class="modal-footer">
					<button type="button" class="saveButton" onclick="ui.sendRolForm()">Guardar</button>
				</div><!-- .modal-footer -->
			</div><!-- .modal-content -->
		</div><!-- .modal-dialog -->
	</div><!-- .modal -->

	<div id="modalPermiso" class="modal fade">
		<div class="modal-dialog" id="formPermiso">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" onclick="ui.closeModal('Permiso')">&times;</button>
					<h2 class="dialog-title">Permiso</h2>
				</div><!-- modal-header -->
				<div class="modal-body">
					<div class="form-group">
						<label for="id">ID</label>
						<input type="number" name="id">
					</div><!-- .form-group-->

					<div class="form-group">
						<label for="nombre_permiso">Nombre del permiso (*)</label>
						<input type="text" name="nombre_permiso">
					</div><!-- .form-group-->

					<div class="form-group">
						<label for="funcionalidad">Funcionalidad (*)</label>
						<input type="text" name="funcionalidad">
					</div><!-- .form-group-->

					<div class="form-group">
						<label for="descripcion">Descripcion</label>
						<textarea name="descripcion"></textarea>
					</div><!-- .form-group-->

					<div class="form-group">
						<label for="estado">Estado (*)</label>
						<select name="estado">
							<option value="A">Activo</option>
							<option value="B">Inactivo</option>
						</select>
					</div><!-- .form-group-->
				</div><!-- modal-body -->

				<div class="modal-footer">
					<button type="button" class="saveButton" onclick="ui.sendPermisoForm()">Guardar</button>
				</div><!-- .modal-footer -->
			</div><!-- .modal-content -->
		</div><!-- .modal-dialog -->
	</div><!-- .modal -->
</body>
