<!DOCTYPE HTML>
<head>
	<title>Administracion de usuarios</title>
	<meta charset="utf-8" />
	<link rel="stylesheet" href="css/bootstrap.min.css" />
	<link rel="stylesheet" href="css/bootstrap-theme.min.css" />
	<link rel="stylesheet" href="abm.css" />
	<script type="text/javascript" src="jquery.js"></script>
	<script type="text/javascript" src="js/bootstrap.min.js"></script>
	<script type="text/javascript" src="abm.js"></script>
</head>

<body onload="initUI()">
	<div class="loadingScreen"></div>

	<a id="logoutButton" class="btn btn-danger glyphicon glyphicon-off" href="/login">Salir</a>

	<nav id="tabBox">
		<ul class="nav nav-tabs">
			<li class="active"><a id="personasTabButton" class="glyphicon glyphicon-user" onclick="ui.activateTab('personas')" data-toggle="tab">Personas</a>
			<li><a id="usuariosTabButton" class="glyphicon glyphicon-user" onclick="ui.activateTab('usuarios')" data-toggle="tab">Usuarios</a>
			<li><a id="rolesTabButton" class="glyphicon glyphicon-knight" onclick="ui.activateTab('roles')" data-toggle="tab">Roles</a>
			<li><a id="permisosTabButton" class="glyphicon glyphicon-check" onclick="ui.activateTab('permisos')" data-toggle="tab">Permisos</a>
		</ul>
	</nav>

	<section class="tabSection" id="personasTab">
		<form class="form-horizontal">
			<header><h3 class="pull-center">Administración de Personas</h3></header>
				
			<!-- NOMBRE-->
			<div class="form-group">
				<label for="nombre" class="control-label col-xs-2 col-sm-2 col-xs-offset-1">Nombre:</label>
				<div class="col-xs-3 col-sm-3 col-lg-2">
					<input type="text" class="form-control" name="nombre" placeholder="Nombre"></input>
				</div>
				<label for="apellidos" class="control-label col-xs-2 col-sm-2 col-lg-offset-1">Apellidos:</label>
				<div class="col-xs-3 col-sm-3 col-lg-2">
					<input type="text" class="form-control" name="apellidos" placeholder="Apellidos"></input>
				</div>
			</div>

			<!-- TIPO DE DOC-->
			<div class="form-group">
				<label for="option" class="control-label col-xs-2 col-md-2 col-xs-offset-1">Tipo de documento:</label>
				<div class="col-xs-3 col-md-3 col-lg-2">
					<select class="form-control" name="tipo_doc">
						<option value="1">DNI</option>
						<option value="2">LE</option>
						<option value="3">LC</option>
					</select>
				</div>
				<label for="nrodoc" class="control-label col-xs-2 col-sm-2 col-lg-offset-1">Número de documento:</label>
				<div class="col-xs-3 col-sm-3 col-md-3 col-lg-2">
					<input type="text" class="form-control" name="nro_doc" placeholder="Nro Documento"></input>
				</div>
			</div>	

			<!-- ESTADO-->				
			<div class="form-group">
				<label for="option" class="control-label col-xs-2 col-xs-offset-1">Estado:</label>
				<div class="col-xs-3 col-md-3 col-lg-2">
					<select class="form-control" name="estado">
						<option value="*">Todos</option>
						<option value="A">Activo</option>
						<option value="B">Inactivo</option>
					</select>
				</div>
			<!-- BOTON  -->
				<div class="col-xs-3 col-md-2 col-lg-2 col-xs-offset-2 col-md-offset-3">
					<button class="btn btn-block btn-primary glyphicon glyphicon-search">Buscar</button>
				</div>
			</div>
		</form>

		<table id="personasTable" caption="Administrar personas">
			<thead><tr>
				<th>ID</th>
				<th>Apellido</th>
				<th>Nombres</th>
				<th>Tipo Doc.</th>
				<th>Nro. Doc.</th>
				<th>Fecha nacimiento</th>
				<th>Sexo</th>
				<th>Domicilio</th>
				<th>Telefono</th>
				<th>Estado</th>
			</tr></thead>
			<tbody>
			</tbody>
		</table>
	</section>

	<section class="tabSection" id="usuariosTab">
		<form class="form-horizontal">
			<header><h3 class="pull-center">Administración de Usuarios</h3></header>
				<div class="form-group">
					<label for="nombre" class="control-label col-xs-2 col-sm-2 col-xs-offset-1">Nombre:</label>
					<div class="col-xs-3 col-sm-3 col-md-3 col-lg-2">
						<input type="text" class="form-control col-sm-2" id="nombre" placeholder="Nombre"></input>
					</div>
					<label for="apellidos" class="control-label col-xs-2 col-sm-2 col-lg-offset-1">Apellidos:</label>
					<div class="col-xs-3 col-sm-3 col-md-3 col-lg-2">
						<input type="text" class="form-control" id="apellidos" placeholder="Apellidos"></input>
				    </div>
				</div>
			<div class="form-group">
				<label for="option" class="control-label col-xs-2 col-md-2 col-xs-offset-1">Tipo de documento:</label>
				<div class="col-xs-3 col-md-3 col-lg-2">
					<select class="form-control" name="" id="option">
						<option value="">DNI</option>
						<option value="">LE</option>
						<option value="">LC</option>
					</select>
				</div>
				<label for="nrodoc" class="control-label col-xs-2 col-sm-2 col-lg-offset-1">Número de documento:</label>
				<div class="col-xs-3 col-sm-3 col-md-3 col-lg-2">
					<input type="text" class="form-control" id="nrodoc" placeholder="Nro Documento"></input>
				</div>
			</div>				
			<div class="form-group">
				<label for="option" class="control-label col-xs-2 col-md-2 col-xs-offset-1">Estado:</label>
				<div class="col-xs-3 col-md-3 col-lg-2">
					<select class="form-control" name="" id="option">
						<option value="">Todos</option>
						<option value="">Activo</option>
						<option value="">Inactivo</option>
					</select>
				</div>
				<div class="col-xs-3 col-md-3 col-lg-2 col-xs-offset-2 col-md-offset-2 col-lg-offset-3">
					<button class="btn btn-primary btn-block glyphicon glyphicon-search">Buscar</button>
				</div>
			</div>
		</form>		

		<table id="usuariosTable">
			<thead><tr>
				<th>ID</th>
				<th>Nombre usuario</th>
				<th>E-Mail</th>
				<th>Estado</th>
			</tr></thead>
			<tbody>
			</tbody>
		</table>
	</section>

	<section class="tabSection" id="rolesTab">

		<form class="form-horizontal">
			<header><h3 class="pull-center">Administración de Roles</h3></header>
				
			<!-- NOMBRE-->
			<div class="form-group">
				<label for="nombre-amigable" class="control-label col-xs-2 col-sm-2 col-xs-offset-1">Nombre amigable:</label>
				<div class="col-xs-3 col-sm-3 col-md-3 col-lg-2">
					<input type="text" class="form-control" id="nombre-amigable" placeholder="Nombre amigable"></input>
				</div>
			<!-- BOTON -->
				<div class="col-xs-3 col-md-2 col-lg-2 col-xs-offset-2 col-md-offset-3">
					<button class="btn btn-primary btn-block glyphicon glyphicon-search">Buscar</button>
				</div>
			</div> 
		</form>

		<table id="rolesTable">
			<thead><tr>
				<th>ID</th>
				<th>Nombre Rol</th>
				<th>Nombre amigable</th>
				<th>Estado</th>
			</tr></thead>
			<tbody>
			</tbody>
		</table>
	</section>

	<section class="tabSection" id="permisosTab">
		<header><h3 class="pull-center">Administración de Permisos</h3></header>
		<table id="permisosTable">
			<thead><tr>
				<th>ID</th>
				<th>Funcionalidad</th>
				<th>Nombre Permiso</th>
				<th>Estado</th>
			</tr></thead>
			<tbody>
			</tbody>
		</table>


	</section>

	<div class="text-center navbar-fixed-bottom navbar-default">
		<div class="btn-group" style="margin: 12px">
			<button type="button" id="deleteButton" class="glyphicon glyphicon-trash btn-danger btn-lg" onclick="ui.deleteButtonPressed()">Eliminar</button>
			<button type="button" id="editButton" class="glyphicon glyphicon-pencil btn-primary btn-lg" onclick="ui.editButtonPressed()">Modificar</button>
			<button type="button" id="rolesButton" class="glyphicon glyphicon-knight btn-primary btn-lg" onclick="ui.rolesButtonPressed()">Roles</button>
			<button type="button" id="permisosButton" class="glyphicon glyphicon-check btn-primary btn-lg" onclick="ui.permisosButtonPressed()">Permisos</button>
			<button type="button" id="newButton" class="glyphicon glyphicon-plus btn-success btn-lg" onclick="ui.newButtonPressed()">Agregar</button>
		</div>
	</div>

	<div id="modalPersona" class="modal fade">
		<div class="modal-dialog modal-lg" id="formPersona">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" onclick="ui.closeModal('Persona')">&times;</button>
					<h2 id="formPersonaTitle" class="modal-title">Persona</h2>
				</div> <!-- .modal-header -->
				<div class="modal-body">
					<form class="form-horizontal col-md-12">
					<!-- Las fotos no estan habilitadas todavia -->
					<input type="hidden" name="id">
					<input type="hidden" name="foto" value="">
					<input type="hidden" name="foto_registro" value="">

					<div class="form-group col-md-6">
						<label for="apellidos" class="col-md-4">Apellido (*)</label>
						<div class="col-md-8"><input type="text" name="apellidos" required></div>
					</div><!-- .form-group -->

					<div class="form-group col-md-6">
						<label for="nombres" class="col-md-4">Nombre (*)</label>
						<div class="col-md-8"><input type="text" name="nombres" required></div>
					</div><!-- .form-group -->

					<div class="form-group col-md-6">
					<label for="tipo_doc" class="col-md-4">Tipo de documento (*)</label>
						<div class="col-md-8"><select name="tipo_doc" required>
							<option value="1">DNI</option>
							<option value="2">LE</option>
							<option value="3">LC</option>
						</select></div>
					</div><!-- .form-group -->

					<div class="form-group col-md-6">
						<label for="nro_doc" class="col-md-4">Numero de documento (*)</label>
						<div class="col-md-8"><input type="number" name="nro_doc" required></div>
					</div><!-- .form-group -->

					<div class="form-group col-md-6">
						<label for="fecha_nacimiento" class="col-md-4">Fecha de nacimiento (*)</label>
						<div class="col-md-8"><input type="date" name="fecha_nacimiento" required></div>
					</div><!-- .form-group -->

					<div class="form-group col-md-6">
						<label for="domicilio" class="col-md-4">Domicilio (*)</label>
						<div class="col-md-8"><input type="text" name="domicilio" required></div>
					</div><!-- .form-group -->

					<div class="form-group col-md-6">
						<label for="sexo" class="col-md-4">Sexo (*)</label>
						<div class="col-md-8"><select name="sexo" required>
							<option value="M">Masculino</option>
							<option value="F">Femenino</option>
							<option value="O">Otro</option>
						</select></div>
					</div><!-- .form-group -->

					<div class="form-group col-md-6">
						<label for="telefono" class="col-md-4">Telefono (*)</label>
						<div class="col-md-8"><input type="text"  name="telefono" required></div>
					</div><!-- .form-group -->

					<div class="form-group col-md-12">
						<label for="descripcion" class="col-md-2">Descripcion</label>
						<div class="col-md-10"><textarea  name="descripcion"></textarea></div>
					</div><!-- .form-group -->

					<div class="form-group col-md-6">
						<label for="Estado" class="col-md-4">Estado (*)</label>
						<div class="col-md-8"><select name="estado" required></div>
							<option value="A">Activo</option>
							<option value="B">Inactivo</option>
						</select></div>
					</div><!-- .form-group -->
				</form>
				</div><!-- .modal-body -->
				<div class="modal-footer">
					<button type="button" class="saveButton" onclick="ui.validarPersonaForm()">Guardar</button>
				</div><!-- .modal-footer -->
			</div><!-- .modal-content -->
		</div><!-- .modal-dialog -->
	</div><!-- modal -->

	<div id="modalUsuario" class="modal fade">
		<div class="modal-dialog modal-lg" id="formUsuario">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" onclick="ui.closeModal('Usuario')">&times;</button>
					<h2 class="modal-title">Usuario</h2>
				</div><!-- .modal-header -->
				<div class="modal-body">

					<form class="form-horizontal col-md-12">

					<input type="hidden" id="usuarioIdInput" name="id">

					<div class="form-group col-md-6">
						<label for="nombre_usuario" class="col-md-4">Nombre de Usuario (*)</label>
						<div class="col-md-8">
							<input type="text" name="nombre_usuario">
						</div>
					</div><!-- .form-group -->

					<div class="form-group col-md-6">
						<label for="password" class="col-md-4">Contraseña (*)</label>
						<div class="col-md-8">
							<input type="password" name="password">
						</div>
					</div><!-- .form-group -->

					<div class="form-group col-md-6">
						<label for="id_persona" class="col-md-4">Persona (*)</label>
						<div class="col-md-8">
							<select name="id_persona">
							</select>
						</div>
					</div><!-- .form-group -->

					<div class="form-group col-md-6">
						<label for="email" class="col-md-4">E-Mail (*)</label>
						<div class="col-md-8">
							<input type="text" name="email">
						</div>
					</div><!-- .form-group -->

					<div class="form-group col-md-12">
						<label for="descripcion" class="col-md-2">Descripcion (*)</label>
						<div class="col-md-10">
							<textarea name="descripcion" ></textarea>
						</div>
					</div><!-- .form-group -->

					<div class="form-group col-md-6">
						<label for="estado" class="col-md-4">Estado</label>
						<div class="col-md-8">
							<select name="estado">
								<option value="A">Activo</option>
								<option value="B">Inactivo</option>
								<option value="S">Suspendido</option>
							</select>
						</div>
					</div><!-- .form-group -->

					</form>

				</div><!-- .modal-body -->
				<div class="modal-footer">
					<button type="button" class="btn-primary glyphicon glyphicon-knight" onclick="ui.rolesButtonPressed()">Gestionar roles</button>
					<button type="button" class="saveButton" onclick="ui.sendUsuarioForm()">Guardar</button>
				</div><!-- .modal-footer -->
			</div><!-- .modal-content -->
		</div><!-- .modal-content -->
	</div><!-- .modal -->

	<div id="modalUsuarioRol" class="modal fade">
		<div class="modal-dialog modal-dialog-lg" id="formUsuarioRol">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" onclick="ui.closeModal('UsuarioRol')">&times;</button>
					<h2 class="modal-title">Roles del usuario</h2>
					<h3 class="modal-title">NOMBRE DE USUARIO</h3><!-- Sera modificado desde javascript -->
				</div><!-- .modal-header -->
				<div class="modal-body">
					<input type="hidden" name="id_usuario" value="">

					<div class="col-md-4">
						<select size="12" name="roles_asignados"></select>
					</div>

					<div class="btn-group-vertical col-md-4">
						<button type="button" class="btn-primary glyphicon glyphicon-arrow-left" onclick="ui.assignRolUsuario()">Asignar</button>
						<button type="button" class="btn-primary glyphicon glyphicon-arrow-right" onclick="ui.removeRolUsuario()" >Quitar</button>
					</div>

					<div class="col-md-4">
						<select size="12" name="roles_no_asignados"></select>
					</div>

					<div style="visibility: hidden">.</div><!-- sin esto se ve mal el layout -->
				</div><!-- .modal-body -->
				<div class="modal-footer">
						<button type="button" class="btn-success glyphicon glyphicon-ok" onclick="ui.closeModal('UsuarioRol')">Aceptar</button>
				</div><!-- .modal-footer -->
			</div><!-- .modal-content -->
		</div><!-- .modal-dialog -->
	</div><!-- .modal -->

	<div id="modalRol" class="modal fade">
		<div class="modal-dialog modal-lg" id="formRol">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" onclick="ui.closeModal('Rol')">&times;</button>
					<h2 class="dialog-title">Rol</h2>
				</div><!-- .modal-header -->
				<div class="modal-body">
					<form class="form-horizontal">
					<input type="hidden" name="id">

					<div class="form-group col-md-6">
						<label for="nombre_rol" class="col-md-4">Nombre de Rol (*)</label>
						<div class="col-md-8">
							<input type="text" name="nombre_rol">
						</div>
					</div><!-- .form-group-->

					<div class="form-group col-md-6">
						<label for="nombre_amigable" class="col-md-4">Nombre Amigable (*)</label>
						<div class="col-md-8">
							<input type="text" name="nombre_amigable">
						</div>
					</div><!-- .form-group-->

					<div class="form-group col-md-12">
						<label for="descripcion" class="col-md-2">Descripcion</label>
						<div class="col-md-10">
							<textarea name="descripcion" ></textarea>
						</div>
					</div><!-- .form-group-->

					<div class="form-group col-md-6">
						<label for="estado" class="col-md-4">Estado (*)</label>
						<div class="col-md-8">
							<select name="estado">
								<option value="A">Activo</option>
								<option value="B">Inactivo</option>
							</select>
						</div>
					</div><!-- .form-group-->

					</form>
				</div><!-- .modal-body -->
				<div class="modal-footer">
					<button type="button" class="btn-primary glyphicon glyphicon-check" onclick="ui.permisosButtonPressed()">Gestionar permisos</button>
					<button type="button" class="saveButton" onclick="ui.sendRolForm()">Guardar</button>
				</div><!-- .modal-footer -->
			</div><!-- .modal-content -->
		</div><!-- .modal-dialog -->
	</div><!-- .modal -->

	<div id="modalPermisoRol" class="modal fade">
		<div class="modal-dialog modal-dialog-lg" id="formPermisoRol">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" onclick="ui.closeModal('PermisoRol')">&times;</button>
					<h2 class="dialog-title">Permisos del rol</h2>
					<h3 class="dialog-title">NOMBRE DE ROL</h3><!-- Sera modificado desde javascript -->
				</div><!-- .modal-header -->
				<div class="modal-body">
					<input type="hidden" name="id_rol" value="">

					<div class="col-md-4">
						<select size="12" name="permisos_asignados">
						</select>
					</div>

					<div class="btn-group-vertical col-md-4">
						<button type="button" class="btn-primary glyphicon glyphicon-arrow-left" onclick="ui.assignPermisoRol()">Asignar</button>
						<button type="button" class="btn-primary glyphicon glyphicon-arrow-right" onclick="ui.revokePermisoRol()">Quitar</button>
					</div>

					<div class="col-md-4">
						<select size="12" name="permisos_no_asignados">
						</select>
					</div>
					<div style="visibility: hidden">.</div><!-- sin esto se ve mal el layout -->
				</div><!-- .modal-body -->
				<div class="modal-footer">
					<button type="button" class="saveButton" onclick="ui.closeModal('PermisoRol')">Aceptar</button>
				</div><!-- .modal-footer -->
			</div><!-- .modal-content -->
		</div><!-- .modal-dialog -->
	</div><!-- .modal -->

	<div id="modalPermiso" class="modal fade">
		<div class="modal-dialog modal-lg" id="formPermiso">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" onclick="ui.closeModal('Permiso')">&times;</button>
					<h2 class="dialog-title">Permiso</h2>
				</div><!-- modal-header -->
				<div class="modal-body">
					<form class="form-horizontal">

					<input type="hidden" name="id">

					<div class="form-group col-md-6">
						<label for="nombre_permiso" class="col-md-4">Nombre del permiso (*)</label>
						<div class="col-md-8">
							<input type="text" name="nombre_permiso">
						</div>
					</div><!-- .form-group-->

					<div class="form-group col-md-6">
						<label for="funcionalidad" class="col-md-4">Funcionalidad (*)</label>
						<div class="col-md-8">
							<input type="text" name="funcionalidad">
						</div>
					</div><!-- .form-group-->

					<div class="form-group col-md-12">
						<label for="descripcion" class="col-md-2">Descripcion</label>
						<div class="col-md-10">
							<textarea name="descripcion"></textarea>
						</div>
					</div><!-- .form-group-->

					<div class="form-group col-md-6">
						<label for="estado" class="col-md-4">Estado (*)</label>
						<div class="col-md-8">
							<select name="estado">
								<option value="A">Activo</option>
								<option value="B">Inactivo</option>
							</select>
						</div>
					</div><!-- .form-group-->
					</form>
				</div><!-- modal-body -->

				<div class="modal-footer">
					<button type="button" class="saveButton" onclick="ui.sendPermisoForm()">Guardar</button>
				</div><!-- .modal-footer -->
			</div><!-- .modal-content -->
		</div><!-- .modal-dialog -->
	</div><!-- .modal -->

	<div id="modalError" class="modal fade">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" onclick="ui.closeModal('Error')">&times;</button>
					<h3 class="dialog-title"> Ha ocurrido un error</h3>
				</div><!-- modal-header -->
				<div class="modal-body">
					<div id="errorMessage">
						Ha ocurrido un error. <!-- Esto sera modificado desde javascript -->
					</div>
				</div><!-- modal-body -->

				<div class="modal-footer">
					<button type="button" class="btn btn-danger glyphicon glyphicon-remove" onclick="ui.closeModal('Error')">Cerrar</button>
				</div><!-- .modal-footer -->
			</div><!-- .modal-content -->
		</div><!-- .modal-dialog -->
	</div><!-- .modal -->

	<div id="modalDenied" class="modal fade">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" onclick="ui.closeModal('Error')">&times;</button>
					<h3 class="dialog-title">Permiso denegado</h3>
				</div><!-- modal-header -->
				<div class="modal-body">
					<div id="deniedMessage">
						Permiso Denegado. <!-- Esto sera modificado desde javascript -->
					</div>
				</div><!-- modal-body -->

				<div class="modal-footer">
					<button type="button" class="btn btn-warning glyphicon glyphicon-remove" onclick="ui.closeModal('Denied')">Cerrar</button>
				</div><!-- .modal-footer -->
			</div><!-- .modal-content -->
		</div><!-- .modal-dialog -->
	</div><!-- .modal -->

</body>
